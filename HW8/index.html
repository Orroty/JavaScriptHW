<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Homework 8</title>
    <link rel="shortcut icon" type="./image/x-icon" href="../img/favicon.ico">


</head>
<body>
    <p class="super_element">Привет</p>

    <img src="https://placeimg.com/50/50/animals" alt="">
    <img src="https://placeimg.com/50/50/arch" alt="">
    <img src="https://placeimg.com/50/50/nature" alt="">
    <img src="https://placeimg.com/50/50/people" alt="">
    <img src="https://placeimg.com/50/50/tech" alt="">
    <img src="https://placeimg.com/50/50/tech/grayscale" alt="">
    <img src="https://placeimg.com/50/50/tech/sepia" alt="">

    <br>

    <button>Кнопка</button>
    <button class="super_element">Кнопка с классом btn</button>
    <button>Кнопка</button>

    <br>

<textarea></textarea>

    <br>

    <ul>
        <li>
            <button>Кнопка 1</button>
        </li>
        <li>
            <button>Кнопка 2</button>
        </li>
        <li>
            <button>Кнопка 3</button>
        </li>
        <li>
            <button>Кнопка 4</button>
        </li>
    </ul>

    <script>
        "use strict";

        console.clear();
        //1. Необходимо вывести сообщение в консоль "все теги прогрузились", когда все теги будут созданы браузером.

        function Task1() {

            // используем EventListener DOMContentLoaded
            document.addEventListener('DOMContentLoaded', () =>
                console.log("все DOM-элементы прогрузились (EventListener)"));

        }

        Task1();

        //2. Необходимо вывести сообщение в консоль "страница загрузилась", когда все ресурсы страницы будут загружены.

        function Task2() {

            // используем onload
            document.body.onload = function () { console.log("все элементы прогрузились (onload)") }

            // используем EventListener load (с document и body не завершается)
            window.addEventListener('load', () =>
                console.log("все ресурсы прогрузились (EventListener)"));

        }

        Task2();

        //3. При клике на какой - либо тег на странице в консоль должно выводиться сообщение наподобие:
        //  - Класс "super_element" присутствует в элементе "div".
        //  - сообщение должно определять присутствует или отсутствует класс "super_element"
        //  - у элемента, а также выводить в нижнем регистре верный тег в данной строке, по
        //  - которому был совершен клик.
        //  - Необходимо использовать делегирование.

        function Task3() {

            document.addEventListener('click', event => 
                console.log('Класс "super_element" ' +
                    (event.target.classList.contains("super_element") ? "присутствует" : "отсутствует") +
                    " в элементе " +
                    event.target.tagName.toLowerCase() +
                ".")
            );
        }

        Task3();

        //4. Сделайте, чтобы при наведении на textarea в консоли появлялось сообщение: "Вы навели на textarea."

        function Task4() {

            document.querySelector('textarea').addEventListener('mouseover', () =>
                console.log("Вы навели на textarea."));

        }

        Task4();

        //5. Необходимо повесить событие клика на тег ul.В обработчике события в консоль необходимо выводить текст, который записан внутри элемента кнопки, по которой был произведен клик.Если клик был не по кнопке, то ничего выводить не нужно.Необходимо использовать делегирование.

        function Task5() {
            document.querySelector('ul').addEventListener('click', (e) => {
                if (e.target.tagName === "BUTTON")
                    console.log(e.target.innerText);
            });
        }

        Task5();

        //6. Вопрос: Почему в console.log пишется сначала текст из 5 задания и только потом выводится текст из 3 задания, если мы кликаем по кнопкам в ul ? Ответ необходимо написать здесь же, под этим комментарием, своими словами.

        function Task6() {
            //document.body.addEventListener("click", function () { console.log("body"); });
            //window.addEventListener("click", function () { console.log("window"); });

            //Ответ
          /*  Судя по эксперименту все события идут вверх по списку вложений, т.е. сначала сработает событие на кнопке/div/p, потом на участке в который вложен данный тег, и так далее до следующей последовательности: событие на body, потом в document, и все закончится на самом первом объекте - window (своеобразная матрешка)*/
        }

        Task6();


        //7. С помощью JS необходимо изменить цвет заднего фона каждого второго тега li.

        function Task7() {
            document.querySelectorAll('li:nth-child(2n)')
                .forEach(el => el.style.backgroundColor = '#8a2be2');
        }

        Task7();

    </script>
</body>

</html>
